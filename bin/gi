#!/bin/bash -e

echoerr() {
	echo "$@" 1>&2;
}

if [ "" == "$1" ]; then
	echoerr "usage: gi <command>";
	echoerr;
	echoerr "Commands:";
	echoerr "  open                      Open a new issue"
	echoerr "  checkout <issue-number>   Check out branch for specified issue, create it if needed";
	echoerr "  details                   Show current branch-issue's details";
	echoerr "  browse                    Open current branch-issue in web browser";
	echoerr "  comment                   Add comment to current branch-issue";
	echoerr "  push                      Push current branch-issue to origin";
	echoerr "  pull-request [<target>]   Create a pull-request with the current branch-issue";
	exit 1;
fi

if ! (git remote | grep -q '^upstream$'); then
	echoerr "No upstream remote configured. Please add it using git:";
	echoerr "  use (git remote add upstream <url>)";
	exit 1;
fi

if [ `uname` == 'Darwin' ]; then
	script=$(greadlink -f "$0")
else
	script=$(readlink -f "$0")
fi
commandsDir=$(dirname $script)/../
$commandsDir"commands/"$@
